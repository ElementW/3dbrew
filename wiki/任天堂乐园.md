**Nintendo Zone** 是 DS Download Stations
的延续，提供发售游戏的独家内容，游戏视频，游戏截图等等。2012年2月6日之前，已经可以从这里下载demo游戏，demo游戏是[downloaded](NIM_Services "wikilink")从eshop的服务器下载并安装到SD卡的。Nintendo
Zone提供的试玩版与eshop相同，尝试下载其他锁区的应用时会出现错误。Nintendo
Zone与 DS(i)
[NZone](http://dsibrew.org/wiki/Nintendo_Zone)不同，访问到的大部分Nintendo
Zone内容是eshop已有的。

就像DSi一样，当你打开3DS时，主机会检查是否有隐藏的NZone（在美国NZone总是可用的），NZone
的 title
会提示发现了Nzone。DSi的title存储在NAND中，但是只在Nzone的覆盖范围时title才可见（即使拔掉SD卡也没关系）。3DS只有未连接互联网时，才会检查是否处于NZone覆盖范围。连接过一个NZone
AP后, 标志就被缓存了，直到与AP断开连接。

修改DSi nzone广播的信标为3DS Best Buy ApNum后, DSi
launcher中NZone的title图标不会闪烁，但是这个title仍然处于半工状态（semi-work）。
NZone title可以连接到服务器, 显示出demo按钮，百思买，WFC配置，
但是选择百思买服务并加载一段时间后，NZone会显示一个错误。（可能有不支持的HTML标签之类的东西）

Like DSi, when an open 3DS detects NZone the originally hidden NZone
title appears and a notification about it appears. Like DSi this title
is already stored on NAND, originally this title only became accessible
from home-menu once the 3DS was in a range of a NZone at least once,
however at some point with a system update this title became
always-accessible. When NZone beacons are in range, 3DS only detects
NZone when not connected to Internet already. Once connected to a NZone
AP, the beacon payload is cached until disconnected from the AP.

When modified DSi nzone beacons are broadcasted with the 3DS Best Buy
ApNum, DSi launcher won't blink the NZone title icon but the title will
still semi-work. The NZone application would connect to the server, with
buttons for demos, Best Buy, and WFC config displayed, but NZone will
display an error a while after selecting "Best Buy" service after a bit
of loading.(probably unsupported html tags etc)

- **Nintendo Zone**和"'nzone'"
  暂译为"'任天堂乐园'"或者“‘天堂乐园’”。但是为了便于查阅，文中均未作翻译。

## 概述

NZone浏览界面看起来和3DS网络浏览器很相似，所以它可能由浏览器修改而来。（从视频支持，移动芯片推断）除去明文部分的未知变化，Nzone的信标加密方式与先前相同。3DS仅在信标正确才会检测并设置NZone
/w NZone 图标闪烁/可用的状态。DSi不检查这些。3DS可用使用DS(i)
NZone，但是只能在NZone的title允许时才行。有DS(i)信标时，3DS能连接到互联网而NZone图标不闪烁。NZone
title载入之后也能工作，但是由于向服务器发送了与DSi不同的URL请求，所以会返回错误。

### Beacon payload format

除去未知部分,3DS Nzone应该是与DS(i) NZone格式相同的）。3DS
NZone不像DS(i)一样有锁区。

| 偏移 | 大小 | 描述                                                                                                                                                                                                                                                                                                                        |
|------|------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0x00 | 32   | AP SSID.                                                                                                                                                                                                                                                                                                                    |
| 0x20 | 10   | 请求连接到服务器的ApNum。这取决于你在使用哪个NZone。 Apnum的结构: RSSCCTTLLL. R是区域代码, SS是ServiceID. CC是国家代码（两个字母），TT是省/州代码（两个字母）, LLL是locationID。 区域代码: 0)日本 1)美国 2/3)欧洲 4)韩国 5)中国. LLL在日本以外的地区均为0, 在日本境内就取决于具体的NZone热点了。TT仅在日本使用，其他地区为0 |
| 0x2a | 2    | 这个u16在所有dump中相同,但是不清楚是什么.客户端没有使用它                                                                                                                                                                                                                                                                   |
| 0x2c | 24   | 一些 UTF-16 编码的服务名.比如 "BestBuy"                                                                                                                                                                                                                                                                                     |
| 0x44 | 32   | AP加密密钥(如果存在的话)                                                                                                                                                                                                                                                                                                    |
| 0x64 | 1    | 未知,DS(i)客户端未使用.3DS的值为0x1, DS(i)的值为0x0.                                                                                                                                                                                                                                                                        |
| 0x65 | 1    | AP密钥类型: 0) Open 1) WEP-64 2) WEP-128 3) WEP-152 7) WPA2-PSK                                                                                                                                                                                                                                                             |
| 0x66 | 1    | 未知 flags, 3DS的值为0x1e,DS(i)的值为0x3. 客户端似乎没有使用第0位和第1位的值. DS(i)客户端使用了第2位的值,但是仍然不明白是什么. ( 第0/1/2位是二进制的地位,bit0/bit1/bit2)                                                                                                                                                    |
| 0x67 | 5    | 填充                                                                                                                                                                                                                                                                                                                        |
| 0x6c | 2    | 未知.3DS为0, DS(i)为0x428.                                                                                                                                                                                                                                                                                                  |
| 0x6e | 2    | CRC偏移以外的整个payload的CRC16, initval为0.                                                                                                                                                                                                                                                                                |

## 无线热点

### Hotspot.conf 格式

AC系统applet从"conf:/hotspot.conf"加载NZone无线热点的列表,其中"conf:" 是
000400DB00010502 文档的[CFA](NCCH#CFA "wikilink"). 这是一个使用
LF换行的CSV文件,每个NZone的全部beacon信息也存储在这个文件中.
这个文件列出多至100个热点.(title版本v1024的hotspot.conf列出了52个热点).
这个格式可以使用[hotspotconf-tool](https://github.com/yellows8/hotspotconf-tool)解析.

CSV开头部分是内部记录区域。在那之后的就是hotspot的记录，每行一个hotspot的区域。使用Base64加密的区域，行尾的补齐字符是'\*'而不是'='。

IsBrowser, IsShop, IsGame 可能决定了是否能够使用 [Internet
Browser](Internet_Browser "wikilink"), [eShop](eShop "wikilink"),
多人联机游戏的功能. IsSetToFW通常为0.

#### Records

| 名称         | 长度上限            | 内容                                                                    |
|--------------|---------------------|-------------------------------------------------------------------------|
| Interval     | Arbitrary           | 小数点分隔,未知,通常为20                                                |
| ServiceName  | 0x40 (after decode) | 热点使用 Base64 编码的 ASCII 服务名                                     |
| Url          | 0x80 (解码后)       | 热点使用 Base64 加密的 URL (通常未使用,可选择连接到零售店的网站)        |
| Ssid         | 32 (解码后)         | 热点使用 Base64 加密的 SSID                                             |
| SecurityKey  | 0x40 (解码后)       | 热点使用 Base64 编码的密钥.但是加密方式7使用了WPA2-PSK,与此字段的值不符 |
| SecurityMode | 1                   | 热点加密类型,0为不加密                                                  |
| ApNum        | 10                  | 热点ApNum, 请参考NZone beacon                                           |
| IsVendorIE   | 1                   | 热点标志,0/1                                                            |
| IsBackground | 1                   | 热点标志,0/1                                                            |
| IsBrowser    | 1                   | 热点标志,0/1                                                            |
| IsShop       | 1                   | 热点标志,0/1                                                            |
| IsGame       | 1                   | 热点标志,0/1                                                            |
| IsSetToFW    | 1                   | 热点标志,0/1                                                            |
| IsZone       | 1                   | 热点标志,0/1. 这是较新的 NZone hotspot.conf 才出现的.                   |

### 热点

hotspot.conf 没有列出的热点也可以通过 NZone beacons 使用。下面的
flags是由 hotspot.conf文件中， "IsXXX"字段组合而来。（包括 IsSetToFW）.
下表中, "hotspot.conf版本"表示列表中增加热点的title版本 .("Unknown"
表示在v1024中已经存在了,但是不清楚到底是在那个版本中添加的.)

#### NZone hotspot.conf 的热点列表

| SSID                                                                      | 加密类型 | 地区          | ServiceName                            | Flags         | Hotspot.conf版本 |
|---------------------------------------------------------------------------|----------|---------------|----------------------------------------|---------------|------------------|
| wifine                                                                    | 无       | JPN           | [Wifine](http://wifine.jp/)            | 1, 1, 1, 1, 1 | Unknown          |
| NintendoSpotPass1                                                         | 无       | EUR           | Nintendo                               | 1, 1, 1, 1, 1 | Unknown          |
| NintendoSpotPass2                                                         | 无       | EUR           | Nintendo                               | 1, 0, 0, 0, 1 | Unknown          |
| attwifi                                                                   | 无       | USA           | AT&T                                   | 1, 1, 1, 1, 1 | Unknown          |
| SIMON WiFi                                                                | 无       | USA           | Simon Malls                            | 1, 1, 1, 1, 1 | Unknown          |
| noasp01                                                                   | 无       | USA           | NOA (Nintendo events)                  | 1, 1, 1, 1, 1 | Unknown          |
| noasp02                                                                   | 无       | USA           | NOA (Nintendo events)                  | 1, 1, 1, 1, 1 | Unknown          |
| Telekom                                                                   | 无       | EUR (Germany) | Telekom                                | 1, 0, 0, 0, 1 | Unknown          |
| Telekom_ICE                                                               | 无       | EUR (Germany) | Telekom                                | 1, 0, 0, 0, 1 | Unknown          |
| Guglielmo                                                                 | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| ASTRO                                                                     | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| Banca Sella WiFi Clienti                                                  | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| confindustria                                                             | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| Grand                                                                     | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| Guglielmo Rimini WiFi                                                     | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| GuglielmoDallaRosaPrati                                                   | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| Hotels                                                                    | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| L.Bettolo                                                                 | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| LecceWireless                                                             | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| P.zza Nicoloso                                                            | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| PortoDiTrieste                                                            | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| Comune-Na Piazze WIFI                                                     | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| WiFi_Stampa                                                               | 无       | IT            | Guglielmo                              | 1, 1, 1, 1, 1 | Unknown          |
| KPN                                                                       | 无       | EUR (NL)      | KPN                                    | 1, 1, 0, 1, 1 | Unknown          |
| METEOR                                                                    | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| MCDONALDS                                                                 | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| AREA_by_METEOR                                                            | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| PATaPAIN_by_METEOR                                                        | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| CASINO_by_METEOR                                                          | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| all_seasons_by_METEOR                                                     | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| ADAGIO_by_METEOR                                                          | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| PULLMAN_by_METEOR                                                         | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| Best_Western_by_METEOR                                                    | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| CreditAgricole_by_METEOR                                                  | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| IBIS_by_METEOR                                                            | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| MERCURE_by_METEOR                                                         | 无       | FR            | Meteor                                 | 1, 0, 0, 0, 1 | Unknown          |
| Telefonica                                                                | 无       | ES            | Telefonica                             | 1, 0, 0, 1, 1 | Unknown          |
| GOWEXWiFi                                                                 | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| OurenseWiFi                                                               | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| RED_LIBRE_AVILES_WILOC                                                    | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| GIJON WIFI                                                                | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| 01MIERESWIFI                                                              | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| 01EibarWifi                                                               | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| WIFIBUR                                                                   | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| ValladolidWiFi                                                            | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| 01PuertoDelRosarioWiFi                                                    | 无       | ES            | Gowex                                  | 1, 0, 0, 1, 1 | Unknown          |
| PT-WIFI                                                                   | 无       | PT            | PTWiFi                                 | 1, 0, 0, 0, 1 | Unknown          |
| FON_ZON_FREE_INTERNET                                                     | 无       | PT            | ZON                                    | 1, 0, 0, 0, 1 | Unknown          |
| [WiFi Zone - The Cloud](https://www.thecloud.net/free-wifi/support/faqs/) | 无       | EUR (GB)      | [The Cloud](https://www.thecloud.net/) | 1, 1, 1, 1, 1 | Unknown          |
| [Mycloud](https://www.thecloud.net/free-wifi/support/faqs/)               | 无       | EUR (GB)      | [The Cloud](https://www.thecloud.net/) | 1, 1, 1, 1, 1 | Unknown          |
| [WLAN Zone - The Cloud](https://www.thecloud.net/free-wifi/support/faqs/) | 无       | EUR (GB)      | [The Cloud](https://www.thecloud.net/) | 1, 0, 0, 0, 1 | Unknown          |
| [_The Cloud](https://www.thecloud.net/free-wifi/support/faqs/)           | 无       | EUR (GB)      | [The Cloud](https://www.thecloud.net/) | ?             | After v1024      |
| FREESPOT                                                                  | None     | JPN           | FREESPOT                               | 1, 1, 1, 1, 1 | Unknown          |
| [TSUTAYA](http://www.tsutaya.co.jp/tc/game/deds/about.html)               | 无       | JPN           | TSUTAYA                                | ?             | Unknown          |
| Wayport_Access                                                            | 无       | USA           | McDonalds                              | ?             | After v1024      |
| Boingo Hotspot                                                            | 无       | USA           | Boingo                                 | ?             | Unknown          |
| ibahn                                                                     | 无       | USA           | iBAHN                                  | ?             | Unknown          |
| BELLWIFI@MCDONALDS                                                        | 无       | USA (Canada)  | Bell                                   | ?             | After v1024      |
| [free-hotspot.com](http://www.free-hotspot.com/)                          | 无       | EUR           | free-hotspot.com                       | ?             | After v1024      |
| Bestbuy                                                                   | WPA2-PSK | USA           | Bestbuy                                |               | After v1024      |

\|}

#### 仅通过 NZone beacons 接入的 NZone hotspots

| SSID                                              | Security | Region/country | ServiceName                 | Notes                                                                                |
|---------------------------------------------------|----------|----------------|-----------------------------|--------------------------------------------------------------------------------------|
| noasp03                                           | None     | USA            | NOA (Nintendo event at GDC) |                                                                                      |
| BestBuy                                           | None     | USA            | BestBuy                     |                                                                                      |
| [7SPOT](http://webapp.7spot.jp/howtoconnect.html) | None     | JPN            | 7-11                        | A LAN-only hostname used is for the retailer's site linked to from the NZone server. |

The above hotspots can only be accessed by broadcasting NZone beacons
which contain the encrypted Nintendo tag data.

#### Hotspot Notes

- 可以通过这些值,配置你的路由器/笔记本/手机为一个Nintendo Zone.
- 使用这项服务需要保证可以连接互联网.
- 接入无线网络后, 页面会显示设备的区域.
  (比如澳大利亚不能重定向到当地Nintendo
  Zone页面,因为那里没有推出Nintendo Zone(s)的服务. 如果3DS
  所在区域没有推出 Nintendo Zone的计划,
  就会重定向到SSID所在区域的Nintendo Zone.)
- 如果你要创建一个私有的永久性Nintendo
  Zone无线热点,最好还是把MAC地址过滤设置为仅允许自己的设备连接.任何形式的加密都会影响
  Nintendo Zone无线热点的正常工作.